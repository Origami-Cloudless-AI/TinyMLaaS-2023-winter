<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>tflm_hello_world - Repository structure description</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
<meta property="og:title" content="tflm_hello_world - Repository structure description">
<meta property="og:description" content="">
<meta property="og:site-name" content="tflm_hello_world">
<meta name="twitter:title" content="tflm_hello_world - Repository structure description">
<meta name="twitter:description" content="">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">tflm_hello_world</span>
    </a>
  </div>
        <div class="quarto-navbar-tools ms-auto">
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../docs/architecture.html">docs</a></li><li class="breadcrumb-item"><a href="../docs/repository_structure.html">Repository structure description</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">tflm_hello_world</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../00_core.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">00_core.html</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../export.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">core</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../aws_s3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">aws_s3.html</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../compiling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">compiling.html</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../installing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">installing.html</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../observing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">observing.html</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../training.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">training.html</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">docs</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../docs/architecture.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Architecture Guide</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../docs/how to demonstrate tinymlaas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Demonstratation of TinyMLaaS WebApp</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../docs/how to install tinymlaas on the cloud.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to install TinyMLaaS on Cloud</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../docs/known issues.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Known Issues</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../docs/software-project-summer-kick-off.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction of this project</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../docs/ui-guide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">UI design guide</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../docs/what to implement in the future.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">What to implement in the future</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../docs/adding_datasets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Datasets</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../docs/huggingface_deployment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Deployment to Huggingface</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../docs/installation_tinymlaas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">TinyMLaaS installation guide (Linux)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../docs/repository_structure.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Repository structure description</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../docs/supporting_new_devices.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Adding support for new devices</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#tflm_hello_world_stagingarduino" id="toc-tflm_hello_world_stagingarduino" class="nav-link active" data-scroll-target="#tflm_hello_world_stagingarduino">tflm_hello_world_staging/arduino/</a>
  <ul class="collapse">
  <li><a href="#arduinotemplate" id="toc-arduinotemplate" class="nav-link" data-scroll-target="#arduinotemplate">arduino/template/</a></li>
  <li><a href="#arduinodockerfile" id="toc-arduinodockerfile" class="nav-link" data-scroll-target="#arduinodockerfile">arduino/Dockerfile</a></li>
  </ul></li>
  <li><a href="#data-data2" id="toc-data-data2" class="nav-link" data-scroll-target="#data-data2">/data &amp; /data2</a></li>
  <li><a href="#nbs" id="toc-nbs" class="nav-link" data-scroll-target="#nbs">nbs/</a>
  <ul class="collapse">
  <li><a href="#nbsdocs" id="toc-nbsdocs" class="nav-link" data-scroll-target="#nbsdocs">nbs/docs/</a></li>
  <li><a href="#nbstests" id="toc-nbstests" class="nav-link" data-scroll-target="#nbstests">nbs/tests/</a></li>
  <li><a href="#jupyter-notebooks" id="toc-jupyter-notebooks" class="nav-link" data-scroll-target="#jupyter-notebooks">Jupyter Notebooks</a></li>
  <li><a href="#configuration-and-other-files" id="toc-configuration-and-other-files" class="nav-link" data-scroll-target="#configuration-and-other-files">Configuration and Other Files</a></li>
  </ul></li>
  <li><a href="#pages" id="toc-pages" class="nav-link" data-scroll-target="#pages">/pages</a></li>
  <li><a href="#relay" id="toc-relay" class="nav-link" data-scroll-target="#relay">/relay</a>
  <ul class="collapse">
  <li><a href="#api-routes" id="toc-api-routes" class="nav-link" data-scroll-target="#api-routes">API Routes</a></li>
  <li><a href="#utility-functions" id="toc-utility-functions" class="nav-link" data-scroll-target="#utility-functions">Utility Functions</a></li>
  </ul></li>
  <li><a href="#rpi-pico" id="toc-rpi-pico" class="nav-link" data-scroll-target="#rpi-pico">/rpi-pico</a>
  <ul class="collapse">
  <li><a href="#raspberry-pi-pico" id="toc-raspberry-pi-pico" class="nav-link" data-scroll-target="#raspberry-pi-pico">Raspberry Pi Pico</a></li>
  </ul></li>
  <li><a href="#tflm_hello_world" id="toc-tflm_hello_world" class="nav-link" data-scroll-target="#tflm_hello_world">/tflm_hello_world/</a></li>
  <li><a href="#x86_simulation" id="toc-x86_simulation" class="nav-link" data-scroll-target="#x86_simulation">/x86_simulation</a></li>
  <li><a href="#inference.py-a-script-for-running-the-person-detection-model-on-a-single-image-using-tensorflow-lite.-the-script-loads-an-image-and-the-tflite-model-preprocesses-the-image-performs-inference-and-prints-the-classification-result-along-with-the-confidence-score." id="toc-inference.py-a-script-for-running-the-person-detection-model-on-a-single-image-using-tensorflow-lite.-the-script-loads-an-image-and-the-tflite-model-preprocesses-the-image-performs-inference-and-prints-the-classification-result-along-with-the-confidence-score." class="nav-link" data-scroll-target="#inference.py-a-script-for-running-the-person-detection-model-on-a-single-image-using-tensorflow-lite.-the-script-loads-an-image-and-the-tflite-model-preprocesses-the-image-performs-inference-and-prints-the-classification-result-along-with-the-confidence-score.">1. <strong>inference.py</strong>: A script for running the person detection model on a single image using TensorFlow Lite. The script loads an image and the TFLite model, preprocesses the image, performs inference, and prints the classification result along with the confidence score.</a></li>
  <li><a href="#files-in-the-root" id="toc-files-in-the-root" class="nav-link" data-scroll-target="#files-in-the-root">## Files in the root</a>
  <ul class="collapse">
  <li><a href="#docker-compose.yml" id="toc-docker-compose.yml" class="nav-link" data-scroll-target="#docker-compose.yml">docker-compose.yml</a></li>
  <li><a href="#inference.dockerfile" id="toc-inference.dockerfile" class="nav-link" data-scroll-target="#inference.dockerfile">inference.Dockerfile:</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/lifeofborna/tflm_hello_world/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Repository structure description</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->
<p>The structure of the repository will be written here.</p>
<hr>
<section id="tflm_hello_world_stagingarduino" class="level2">
<h2 class="anchored" data-anchor-id="tflm_hello_world_stagingarduino">tflm_hello_world_staging/arduino/</h2>
<p>The <code>arduino</code> folder contains all the files and resources needed for running the Arduino portion of the project.</p>
<section id="arduinotemplate" class="level3">
<h3 class="anchored" data-anchor-id="arduinotemplate">arduino/template/</h3>
<p>The <code>template</code> folder holds the source code files for the Arduino project. It includes the following files:</p>
<ul>
<li><p><code>arduino_detection_responder.cpp</code>: Contains the implementation for the detection responder, which processes detected objects and reacts accordingly.</p></li>
<li><p><code>arduino_image_provider.cpp</code>: Handles image acquisition from the image source, such as a camera or sensor, and provides the images to other components for processing.</p></li>
<li><p><code>arduino_main.cpp</code>: The main entry point for the Arduino program. It initializes the necessary components and manages the main loop of the program.</p></li>
<li><p><code>detection_responder.h</code>: Header file for the detection responder, containing the class definition and function prototypes.</p></li>
<li><p><code>image_provider.h</code>: Header file for the image provider, containing the class definition and function prototypes.</p></li>
<li><p><code>main_functions.h</code>: Contains the function prototypes for the main loop and other utility functions used throughout the program.</p></li>
<li><p><code>model_settings.cpp</code>: Contains the implementation for the model settings, including parameters related to the machine learning model (if applicable) and other configurations.</p></li>
<li><p><code>model_settings.h</code>: Header file for the model settings, containing the class definition and function prototypes.</p></li>
</ul>
</section>
<section id="arduinodockerfile" class="level3">
<h3 class="anchored" data-anchor-id="arduinodockerfile">arduino/Dockerfile</h3>
<p>The <code>Dockerfile</code> is used to create a Docker container for the Arduino environment. It defines the necessary components, such as the base image, libraries, and dependencies, required to build and run the Arduino code within the container.</p>
<hr>
</section>
</section>
<section id="data-data2" class="level2">
<h2 class="anchored" data-anchor-id="data-data2">/data &amp; /data2</h2>
<p>The folders called “/data” and “/data2” contain pictures that are used to train image recognition or object recognition models. Within these folders, there are subfolders labeled “0” and “1”. The “0” subfolder contains images that are not the expected ones, while the “1” subfolder contains images of expected objects such as humans or cars. See the <em>Datasets</em> documentation for more information.</p>
<hr>
</section>
<section id="nbs" class="level2">
<h2 class="anchored" data-anchor-id="nbs">nbs/</h2>
<p>The <code>nbs</code> folder contains Jupyter notebooks, configuration files, and additional resources for the project. It is organized as follows:</p>
<section id="nbsdocs" class="level3">
<h3 class="anchored" data-anchor-id="nbsdocs">nbs/docs/</h3>
<p>The <code>docs</code> folder contains teams briefs such as dailies,sprintplanning &amp; other information.</p>
</section>
<section id="nbstests" class="level3">
<h3 class="anchored" data-anchor-id="nbstests">nbs/tests/</h3>
<p>The <code>tests</code> folder contains test cases and test resources for the project.</p>
</section>
<section id="jupyter-notebooks" class="level3">
<h3 class="anchored" data-anchor-id="jupyter-notebooks">Jupyter Notebooks</h3>
<p>The Jupyter notebooks in the <code>nbs</code> folder serve various purposes, such as core functionality, exporting, training, and more:</p>
<ul>
<li><p><code>00_core.ipynb</code>: contains dummy tests and examples.</p></li>
<li><p><code>01_export.ipynb</code>: This notebook contains functions and classes related to creating test files from the main codebase. It includes functionality for generating imports and wrapping test functions for pytest and unittest compatibility.</p></li>
<li><p><code>aws_s3.ipynb</code>: This module provides a class S3_Connector for accessing and manipulating files on AWS S3. It also supports localstack for testing purposes.</p></li>
<li><p><code>compiling.ipynb</code>: Demonstrates the process of compiling code. Defines a set of functions for converting a TensorFlow model into a TensorFlow Lite (TFLite) model and then into a C array, which can be used in microcontrollers or other low-resource environments. The code also includes a function to plot the size difference between the original TFLite model and the quantized TFLite model. Here’s a brief overview of each function:</p></li>
<li><p><code>index.ipynb</code>: Repositorys readme will be update via this notebook.</p></li>
<li><p><code>installing.ipynb</code>: Demonstrates code for building and uploading Docker images for device-specific installers. It includes the following components:</p></li>
<li><p><code>observing.ipynb</code>: Demonstrates the process of observing or monitoring the project, such as tracking performance metrics.</p></li>
<li><p><code>training.ipynb</code>: Contains the code and resources necessary for training machine learning models or other algorithms.</p></li>
</ul>
</section>
<section id="configuration-and-other-files" class="level3">
<h3 class="anchored">Configuration and Other Files</h3>
<ul>
<li><code>nbdev.yml</code>: Configuration file for nbdev, a system that helps build libraries from Jupyter notebooks.</li>
<li><code>_quarto.yml</code>: Configuration file for Quarto, a publishing system for scientific and technical documents.</li>
<li><h2 id="styles.css-contains-custom-css-styles-used-in-the-jupyter-notebooks-or-generated-documentation." class="anchored" data-anchor-id="configuration-and-other-files"><code>styles.css</code>: Contains custom CSS styles used in the Jupyter notebooks or generated documentation.</h2></li>
</ul>
</section>
</section>
<section id="pages" class="level2">
<h2 class="anchored" data-anchor-id="pages">/pages</h2>
<p>Contains the following python files : 1_Device.py, 2_Data.py, 3_Model.py, 4_Training.py, 5_Compiling.py, 6_Installing.py, 7_Observing.py, 8_Documentation.py. And a subfolder that is called tests which contains ROBOTFRAMEWORK tests for each page.</p>
<p>Pages contains the frontend code that utilized streamlit. Each of the files contain the pages frontend code. Such as 1_Device.py contains the apps device page frontend code.</p>
<ul>
<li><code>1_Device.py</code>: allows users to register and manage TinyML devices for the TinyML-as-a-Service (TinyMLaaS) platform. Specifically, this page enables users to add, modify, delete, and select a registered device.</li>
<li><code>2_Data.py</code>: The code allows the user to upload images to the selected dataset, store images to AWS S3, and delete images from the dataset.</li>
<li><code>3_Model.py</code>: Defines the behavior of the “Model” tab of the Streamlit app. It contains functions for displaying and selecting available models for training, and for visualizing a selected model.</li>
<li><code>4_Training.py</code>:The purpose of the tab is to train an image classifier on a custom dataset provided by the user.</li>
<li><code>5_Compiling.py</code>:Defines the behavior of the “Compiling” tab. This tab allows the user to compile a trained machine learning model to the format used by TinyML devices.</li>
<li><code>7_Installing.py</code>:Purpose of this tab is to install the compiled model on a selected TinyML device.</li>
<li><code>8_Observing.py</code>:This tab is for observing predictions sent from the TinyML device. It allows the user to control the data visualization, observe the device output, view the model’s performance, and control the device. Most of the features here place holders.</li>
<li><code>9_Documentation.py</code>: This tab lets the user read the documentation on how to use each page.</li>
</ul>
<hr>
</section>
<section id="relay" class="level2">
<h2 class="anchored" data-anchor-id="relay">/relay</h2>
<p>The <code>/relay</code> folder contains a Flask server that serves as an intermediary between the user and the microcontroller devices, providing API routes for uploading compiled sketches and getting predictions from the devices. The folder consists of the following files:</p>
<ol type="1">
<li><p><code>instructions.md</code>: This file contains instructions on how to set up and run the relay server.</p></li>
<li><p><code>main.py</code>: This is the main Flask application script that provides two API routes for interacting with the devices, as well as utility functions for uploading compiled sketches to the devices.</p></li>
</ol>
<section id="api-routes" class="level3">
<h3 class="anchored" data-anchor-id="api-routes">API Routes</h3>
<ol type="1">
<li><p><code>/install</code>: A <code>POST</code> route for installing the compiled sketch to the device. The request must include the device type. The server checks if the device is supported and uploads the sketch to the device accordingly.</p></li>
<li><p><code>/prediction</code>: A <code>GET</code> route for obtaining the prediction from the device. The request must include the device type. The server reads the prediction from the device and returns it in a JSON format.</p></li>
</ol>
</section>
<section id="utility-functions" class="level3">
<h3 class="anchored" data-anchor-id="utility-functions">Utility Functions</h3>
<ol type="1">
<li><code>upload()</code>: Uploads the compiled sketch in Docker for the Arduino Nano 33 BLE device.</li>
<li><code>upload_rpi()</code>: Uploads the compiled person detection UF2 file to the Raspberry Pi Pico device. The device must be in USB Mass Storage Mode.</li>
<li><code>get_device_port(device_name: str)</code>: Returns the device port as a string.</li>
</ol>
<p>To use the relay server, follow the instructions provided in the <code>instructions.md</code> file. The server allows users to interact with the microcontroller devices easily, enabling them to upload compiled sketches and obtain predictions.</p>
<hr>
</section>
</section>
<section id="rpi-pico" class="level2">
<h2 class="anchored" data-anchor-id="rpi-pico">/rpi-pico</h2>
<section id="raspberry-pi-pico" class="level3">
<h3 class="anchored" data-anchor-id="raspberry-pi-pico">Raspberry Pi Pico</h3>
<p>The <code>/rpi-pico</code> folder contains the necessary files for building and compiling the person detection model for the Raspberry Pi Pico microcontroller. The folder consists of the following files and subfolders:</p>
<ol type="1">
<li><p><code>Dockerfile</code>: A Dockerfile to set up the environment and compile the model for the Raspberry Pi Pico.</p></li>
<li><p><code>/code</code>:</p>
<ul>
<li><code>CMakeLists.txt</code>: A CMake configuration file that includes the necessary settings to build the project.</li>
<li><code>pico_sdk_import.cmake</code>: A CMake script that imports the Pico SDK and sets up the build environment.</li>
<li><code>/person_detection_screen</code>: A subfolder containing the person detection model files and source code for the Raspberry Pi Pico.</li>
</ul></li>
</ol>
<hr>
</section>
</section>
<section id="tflm_hello_world" class="level2">
<h2 class="anchored" data-anchor-id="tflm_hello_world">/tflm_hello_world/</h2>
<p>This folder contains the python code generated from the notebooks in the nbs/ folder. These can be generated by running <code>nbdev_export</code> or <code>nbdev_prepare</code> (which runs when you start the app with <code>make app</code>). You should never manually edit these files. The python files in this folder are used in CI so they should be kept up-to-date with the notebooks, or tests will break.</p>
</section>
<section id="x86_simulation" class="level2">
<h2 class="anchored" data-anchor-id="x86_simulation">/x86_simulation</h2>
<p>This folder contains the Python file for simulating the person detection model on x86 architectures. It was meant to be used to run trained models in CI during tests, but it was never fully implemented:</p>
</section>
<section id="inference.py-a-script-for-running-the-person-detection-model-on-a-single-image-using-tensorflow-lite.-the-script-loads-an-image-and-the-tflite-model-preprocesses-the-image-performs-inference-and-prints-the-classification-result-along-with-the-confidence-score." class="level2">
<h2 class="anchored" data-anchor-id="inference.py-a-script-for-running-the-person-detection-model-on-a-single-image-using-tensorflow-lite.-the-script-loads-an-image-and-the-tflite-model-preprocesses-the-image-performs-inference-and-prints-the-classification-result-along-with-the-confidence-score.">1. <strong>inference.py</strong>: A script for running the person detection model on a single image using TensorFlow Lite. The script loads an image and the TFLite model, preprocesses the image, performs inference, and prints the classification result along with the confidence score.</h2>
</section>
<section id="files-in-the-root" class="level2">
<h2 class="anchored" data-anchor-id="files-in-the-root">## Files in the root</h2>
<section id="docker-compose.yml" class="level3">
<h3 class="anchored" data-anchor-id="docker-compose.yml">docker-compose.yml</h3>
<p>This file is a Docker Compose configuration file that describes how the containers for the TinyML as-a-Service project are built, run, and connected. It defines the following services:</p>
<ol type="1">
<li><p><strong>frontend</strong>: The frontend service builds and runs the web application using the <code>frontend.Dockerfile</code>. It maps the port 8501 for external access and sets the environment variable <code>USE_LOCALSTACK</code> to 1. It also runs the container in privileged mode and mounts the Docker socket as a volume.</p></li>
<li><p><strong>localstack</strong>: The localstack service uses the official LocalStack image to provide a local AWS-like environment. It maps ports 4566 and the range 4510-4559 for external access. The environment variables <code>DEBUG</code>, <code>LAMBDA_EXECUTOR</code>, and <code>DOCKER_HOST</code> are set, and SSL certificate downloading is skipped. The Docker socket is mounted as a volume.</p></li>
</ol>
<table class="table">
<colgroup>
<col style="width: 100%">
</colgroup>
<tbody>
<tr class="odd">
<td style="text-align: left;">### frontend.Dockerfile</td>
</tr>
<tr class="even">
<td style="text-align: left;">This Dockerfile is used to build the frontend container for the TinyML as-a-Service project. The steps in this Dockerfile are as follows:</td>
</tr>
<tr class="odd">
<td style="text-align: left;">1. Use the <code>python:3.9.0-slim-buster</code> base image. 2. Update the package lists and install the necessary dependencies: <code>curl</code>, <code>libportaudio2</code>, <code>libusb-1.0</code>, <code>graphviz</code>, <code>python3-opencv</code>, and <code>xxd</code>. 3. Set the working directory to <code>/app</code>. 4. Copy the <code>data</code> directory from the host to the <code>/data/</code> directory in the container. 5. Copy the <code>requirements.txt</code> file from the host to the container. 6. Install the Python packages listed in <code>requirements.txt</code> using <code>pip3</code>. 7. Download and install Docker by running the Docker installation script. 8. Create a <code>temp</code> directory. 9. Copy all the remaining files from the host to the container. 10. Set the container’s entrypoint command to run the TinyMLaaS application using <code>python3</code>, <code>coverage</code>, and <code>streamlit</code>.</td>
</tr>
<tr class="even">
<td style="text-align: left;">This Dockerfile ensures that all necessary dependencies and files are in place to run the TinyML as-a-Service frontend in a containerized environment.</td>
</tr>
</tbody>
</table>
</section>
<section id="inference.dockerfile" class="level3">
<h3 class="anchored" data-anchor-id="inference.dockerfile">inference.Dockerfile:</h3>
<ul>
<li>This is the Dockerfile for the x86_simulation directory. It creates a Docker image containing a Python application that performs inference on an image using a pre-trained TensorFlow Lite model.</li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>